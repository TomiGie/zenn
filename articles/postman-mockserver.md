---
title: "PostmanのMockServerを使ってみる"
emoji: "🏗️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: [postman, API]
published: true
published_at: 2023-12-24 00:00 # 未来の日時を指定する
---

この記事は、[全世界2,800万人以上の開発者に使われているAPIプラットフォームPostmanの記事を書こう by Postman Advent Calendar 2023](https://qiita.com/advent-calendar/2023/postman) のシリーズ2 24日目の記事です。

[株式会社dott](https://thedott.io/)でバックエンドエンジニアをしているとみぎと申します

今回は、Postmanのコレクション機能をゴリゴリ使ってきた私ですが、なかなか触ることのなかったモックサーバー機能が非常に便利だったので、その紹介をしたいと思います。

# TL;DR

* モックサーバーを作ることで、APIの実装をする前に設計や仕様の
* モックサーバーを作る方法は新規で作成する方法と、既存のリクエストから作成する2つの方法がある
* モックサーバーのレスポンスパターンを複数設定することで、レスポンスコード毎の値を返却するなどの設定が可能


# Postmanのモックサーバーについて

Postmanのモックサーバー機能は、API開発の初期段階で非常に役立つツールです。

この機能を使用すると、実際にAPIを実装する前に、APIのエンドポイントの設計レビューやテストを行うことができます。

もう少し深掘りすると、特定の仕様に沿ったレスポンスを返すように設定されたエンドポイントを簡単に作成・公開することができます。
これにより、フロントエンド開発者やテスターは、バックエンドのAPIが完成する前に作業を進めることができます。

# モックサーバーを作ってみる

早速モックサーバーの作り方なんですが、作成パターンとしては以下の2つがあります。

* 新しいコレクションから作成する
* 既存のコレクションから作成する

この2つのパターンについて順番に説明していきます。


## 新しいコレクションから作成する

新規で作成する場合は、以下の手順で作成できます。

1. サイドメニューのモックサーバーをクリック
2. ＋マークをクリック
3. 「モックサーバーを作成」というタブが表示されるので、「新しいコレクションを作成」を選択
4. モックAPIのURLとレスポンスコード・レスポンスボディを入力
    ![](https://storage.googleapis.com/zenn-user-upload/b14a065824f3-20231223.gif)
5. 「次に進む」をクリック
6. モックサーバーの名前を入力
7. 必要に応じてその他の設定も追加する
![](https://storage.googleapis.com/zenn-user-upload/9fe5e045a017-20231223.png)
1. 「モックサーバーを作成」をクリック

はい、できました！
![](https://storage.googleapis.com/zenn-user-upload/ae96d7ae52d9-20231223.png)

モックサーバーの作成が完了すると、コレクションのリストに先程設定したモックサーバーのリクエストも自動で追加されるので、そのままリクエストを送信することができます。
![](https://storage.googleapis.com/zenn-user-upload/b78a42e6125f-20231223.png)


リクエストを送信すると、モックサーバーの設定で指定したレスポンスが返ってきます。

::: message
レスポンスを編集したい場合は、リクエストのアコーディオン「>」をクリックすると、`デフォルト`というリクエストサンプルが表示されるので、そこのレスポンスを編集します。
レスポンスを編集して、再度リクエストを送信すると、編集したレスポンスが返ってきます。
:::

![](https://storage.googleapis.com/zenn-user-upload/1feaeb342eee-20231223.gif)

なんとまあ、簡単なんでしょう！


## 既存のコレクションから作成する

はい、続いては既存コレクションから作成する方法です。
こちらは、最初にコレクション機能の方でリクエストを作成してた場合に使えます。


事前準備として、予めコレクションからリクエストを作成して、リクエストのURLやリクエストパラメータ、レスポンスパラメータのサンプルを登録しておきます


モックサーバーの作成画面表示までは、新規コレクションから作成と同じです。

今度はモックサーバーの作成タブから以下の操作を行います

1. 「既存のコレクションから作成」を選択
2. モックサーバー化したいコレクションを選択
3. モックサーバーの名前を入力
4. 必要に応じて環境などの設定を行う
5. 「モックサーバーを作成」をクリック
   ![](https://storage.googleapis.com/zenn-user-upload/188749af6009-20231223.gif)

はい、できました！

あとは既存のコレクションのURLを更新してリクエストを送信するだけです。


# その他
上記で触れたのはモックサーバーのほんの一部の機能でしかありません。

その他にも

* モックサーバーをAPIキー認証をつけてプライベートで公開
* リクエスト・レスポンスのサンプルをレスポンスコードごとに設定し、複数パターンのレスポンスを返す
* ネットワーク遅延のシュミレート

などなど、まだまだ便利機能がたくさんあります。

# まとめ

以上がPostmanのモックサーバーについての紹介になります。

繰り返しになりますが、Postmanのモックサーバーの機能を使うことで、APIの仕様を確認することができますし、フロントエンド開発者やテスターは、バックエンドのAPIが完成する前に作業を進めることができ、開発の効率化につながるのでぜひ使ってみてください！